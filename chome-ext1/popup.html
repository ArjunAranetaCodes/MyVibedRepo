<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    :root {
      --bg: #ffffff;
      --border: #e7e7ea;
      --text: #1f1f26;
      --muted: #6b6f76;
      --brand: #7b57ff;
      --accent: #7b57ff;
      --success: #4caf50;
      --error: #f44336;
    }

    html, body {
      width: 420px;
      height: 520px;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
      color: var(--text);
      background: var(--bg);
    }

    /* Top bar */
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 12px;
      border-bottom: 1px solid var(--border);
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
    }
    .brand .logo {
      width: 26px;
      height: 26px;
      border-radius: 8px;
      background: var(--brand);
      color: #fff;
      display: grid;
      place-items: center;
      font-weight: 700;
      font-size: 16px;
    }
    .actions { display: flex; align-items: center; gap: 8px; }
    .icon-btn { width: 30px; height: 30px; border: 1px solid var(--border); background: #fff; border-radius: 8px; display: grid; place-items: center; cursor: pointer; }
    .icon-dot { width: 4px; height: 4px; background:#9397a1; border-radius: 50%; box-shadow: 6px 0 0 #9397a1, -6px 0 0 #9397a1; }
    .icon-rec { width: 12px; height: 12px; background:#ff3b30; border-radius: 50%; }
    .icon-search { width: 14px; height: 14px; border:2px solid #6b6f76; border-radius:50%; position: relative; }
    .icon-search::after { content:''; position:absolute; right:-5px; bottom:-5px; width:8px; height:2px; background:#6b6f76; transform: rotate(45deg); border-radius:1px; }

    /* Tabs */
    .tabs { display: flex; gap: 8px; padding: 8px 10px; border-bottom: 1px solid var(--border); }
    .tab { flex: 0 0 auto; font-size: 12px; padding: 6px 10px; border-radius: 10px; border: 1px solid var(--border); background: #fff; color: var(--muted); cursor: pointer; }
    .tab.active { color: var(--text); font-weight: 600; border-color: #d6d6db; }

    /* Editor card */
    .card { margin: 10px; border: 1px dashed #d6d6db; border-radius: 12px; height: 280px; background: #fafafa; position: relative; display: flex; flex-direction: column; }
    .editor-bar { padding: 10px; display: flex; align-items: center; gap: 8px; }
    .play-btn { width: 34px; height: 34px; border-radius: 50%; background: var(--accent); color:#fff; display:grid; place-items:center; border:none; cursor:pointer; box-shadow: 0 2px 6px rgba(123,87,255,0.35); }
    .tool-btn { width:34px; height:34px; border:1px solid var(--border); background:#fff; border-radius:8px; display:grid; place-items:center; cursor:pointer; }
    .toggle { display:flex; align-items:center; gap:8px; margin-left:auto; font-size:12px; color:var(--muted); }
    .switch { appearance:none; width:30px; height:18px; background:#d0d2d7; border-radius:999px; position:relative; outline:none; cursor:pointer; }
    .switch:checked { background:#a3a6ad; }
    .switch:before { content:''; position:absolute; top:2px; left:2px; width:14px; height:14px; background:#fff; border-radius:50%; transition: transform .2s; }
    .switch:checked:before { transform: translateX(12px); }

    /* List area */
    .editor { flex: 1; margin: 0 10px 10px 10px; border-radius: 10px; background: #fff; border: 1px solid var(--border); overflow: hidden; display:flex; flex-direction:column; }
    #profilesList { flex:1; overflow:auto; }
    .list-item { display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid var(--border); font-size:13px; }
    .list-item:hover { background:#fafafa; }
    .list-item .name { overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width:260px; }
    .list-actions { display:flex; gap:6px; }
    .mini-btn { padding:4px 8px; border:1px solid var(--border); background:#fff; border-radius:6px; font-size:11px; cursor:pointer; }

    /* Controls */
    .controls { display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin: 10px; }
    .control-chip { display:flex; align-items:center; gap:8px; padding:6px 10px; border:1px solid var(--border); border-radius:10px; background:#fff; font-size:12px; }
    .record-switch { appearance:none; width:36px; height:20px; background:#d0d2d7; border-radius:999px; position:relative; cursor:pointer; }
    .record-switch:checked { background:#ff8a80; }
    .record-switch:before { content:''; position:absolute; top:2px; left:2px; width:16px; height:16px; background:#fff; border-radius:50%; transition: transform .2s; }
    .record-switch:checked:before { transform: translateX(16px); }
    .text-input { flex: 1 1 140px; min-width: 120px; padding:8px 10px; border:1px solid var(--border); border-radius:8px; font-size:12px; }
    .select { flex: 1 1 140px; min-width: 120px; padding:8px 10px; border:1px solid var(--border); border-radius:8px; font-size:12px; background:#fff; }
    .btn { padding:8px 12px; border:1px solid var(--border); background:#fff; border-radius:8px; font-size:12px; cursor:pointer; }
    .btn.primary { background: var(--accent); color:#fff; border-color: var(--accent); }

    /* Status */
    .status { margin: 10px; padding: 8px 10px; border:1px solid var(--border); border-radius:8px; background:#fff; font-size:12px; color:var(--muted); }

    /* Hidden utility buttons kept for JS hooks */
    .visually-hidden { position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); border:0; }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="brand">
      <div class="logo">F</div>
      <div>FormCapture</div>
    </div>
    <div class="actions">
      <button class="icon-btn" id="getPageInfo" title="Search / Page info"><div class="icon-search"></div></button>
      <button class="icon-btn" title="Record"><div class="icon-rec"></div></button>
      <button class="icon-btn" title="More"><div class="icon-dot"></div></button>
    </div>
  </div>

  <div class="tabs">
    <button class="tab active">Lite</button>
    <button class="tab">Advanced</button>
  </div>

  <div class="card">
    <div class="editor-bar">
      <button class="play-btn" id="saveNote" title="Run / Save">â–¶</button>
      <button class="tool-btn" title="Edit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z" stroke="#6b6f76"/></svg></button>
      <div class="toggle">
        <span>onload</span>
        <input class="switch" type="checkbox" id="onloadToggle" />
      </div>
    </div>
    <div class="editor">
      <div id="profilesList"></div>
    </div>
  </div>

  <div class="controls">
    <div class="control-chip">
      <span>Record</span>
      <input type="checkbox" id="recordToggle" class="record-switch" />
    </div>
    <input type="text" id="profileName" class="text-input" placeholder="Profile name" />
    <select id="profileSelect" class="select"></select>
    <button class="btn" id="saveProfileBtn">Save</button>
    <button class="btn primary" id="applyProfileBtn">Apply</button>
  </div>

  <div class="status" id="status">Ready to use!</div>

  <!-- Hidden elements preserved for existing JS hooks -->
  <button id="highlightText" class="visually-hidden">Highlight</button>
  <button id="clearData" class="visually-hidden">Clear</button>
  <button id="exportNotes" class="visually-hidden">Export</button>
  <label class="visually-hidden"><input type="file" id="importNotes" accept="application/json" /></label>

  <script src="popup.js"></script>
</body>
</html>
